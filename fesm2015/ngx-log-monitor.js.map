{"version":3,"file":"ngx-log-monitor.js","sources":["ng://ngx-log-monitor/lib/helpers/log-message.helper.ts","ng://ngx-log-monitor/lib/log-monitor.component.ts","ng://ngx-log-monitor/lib/log-monitor.module.ts","ng://ngx-log-monitor/index.ts","ng://ngx-log-monitor/ngx-log-monitor.ts"],"sourcesContent":["import {LogMessage} from '../models/log-message.model';\n\nexport const normalizeLogMessage = (msg: LogMessage): LogMessage => ({\n  ...msg,\n  type: (msg.type ? msg.type : 'LOG'),\n  timestamp: (msg.timestamp ? msg.timestamp : new Date().toLocaleString() )\n});\n","import {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    Component,\n    ElementRef,\n    Input, NgZone,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    SimpleChanges,\n    ViewChild\n} from '@angular/core';\nimport { LogMessage } from './models/log-message.model';\nimport { normalizeLogMessage } from './helpers/log-message.helper';\nimport { Observable, Subscription } from 'rxjs';\nimport { delay } from 'rxjs/operators';\n\n@Component({\n    selector: 'log-monitor',\n    templateUrl: './log-monitor.component.html',\n    styleUrls: ['./log-monitor.component.scss']\n})\nexport class LogMonitorComponent implements OnInit, OnDestroy, OnChanges, AfterViewInit {\n\n    @Input() delay = 500;\n    @Input() title;\n    @Input() logStream: Observable<LogMessage>;\n    @Input() history: LogMessage[] = [];\n    @Input() theme: 'dark' | 'light' = 'dark';\n    @Input() icons = true;\n    @Input() customClass = 'log-container';\n    @Input() animated = true;\n    @ViewChild('container') container: ElementRef;\n\n    _history: LogMessage[] = [];\n\n    private _subr: Subscription;\n\n    constructor(private zone: NgZone) { }\n\n    ngOnInit() {\n        if (this.logStream) {\n            this._subr = this.logStream\n                .pipe(delay(this.delay))\n                .subscribe(a => {\n                    this._history.push(normalizeLogMessage(a));\n                    this.zone.run(() => {\n                        setTimeout(() => this.scrollToBottom());\n                    });\n                });\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subr) {\n            this._subr.unsubscribe();\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['history']) {\n            this._history = changes['history'].currentValue.map(normalizeLogMessage);\n        }\n    }\n\n    ngAfterViewInit() {\n        this.scrollToBottom();\n    }\n\n    private scrollToBottom() {\n        this.container.nativeElement.scrollTop = this.container.nativeElement.scrollHeight;\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { LogMonitorComponent } from './log-monitor.component';\nimport {CommonModule} from '@angular/common';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [LogMonitorComponent],\n  exports: [LogMonitorComponent]\n})\nexport class LogMonitorModule { }\n","/*\n * Public API Surface of ngx-log-monitor\n */\n\nexport * from './lib/log-monitor.component';\nexport * from './lib/log-monitor.module';\nexport * from './lib/models/log-message.model';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,mBAAmB,GAAG,CAAC,GAAe,sCAC9C,GAAG,KACN,IAAI,GAAG,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,GAAG,KAAK,CAAC,EACnC,SAAS,GAAG,GAAG,CAAC,SAAS,GAAG,GAAG,CAAC,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC,cAAc,EAAE,CAAE,IACzE;;ICgBW,mBAAmB,GAAhC,MAAa,mBAAmB;IAgB5B,YAAoB,IAAY;QAAZ,SAAI,GAAJ,IAAI,CAAQ;QAdvB,UAAK,GAAG,GAAG,CAAC;QAGZ,YAAO,GAAiB,EAAE,CAAC;QAC3B,UAAK,GAAqB,MAAM,CAAC;QACjC,UAAK,GAAG,IAAI,CAAC;QACb,gBAAW,GAAG,eAAe,CAAC;QAC9B,aAAQ,GAAG,IAAI,CAAC;QAGzB,aAAQ,GAAiB,EAAE,CAAC;KAIS;IAErC,QAAQ;QACJ,IAAI,IAAI,CAAC,SAAS,EAAE;YAChB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS;iBACtB,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBACvB,SAAS,CAAC,CAAC;gBACR,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC3C,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC;oBACV,UAAU,CAAC,MAAM,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC;iBAC3C,CAAC,CAAC;aACN,CAAC,CAAC;SACV;KACJ;IAED,WAAW;QACP,IAAI,IAAI,CAAC,KAAK,EAAE;YACZ,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;SAC5B;KACJ;IAED,WAAW,CAAC,OAAsB;QAC9B,IAAI,OAAO,CAAC,SAAS,CAAC,EAAE;YACpB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,YAAY,CAAC,GAAG,CAAC,mBAAmB,CAAC,CAAC;SAC5E;KACJ;IAED,eAAe;QACX,IAAI,CAAC,cAAc,EAAE,CAAC;KACzB;IAEO,cAAc;QAClB,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,aAAa,CAAC,YAAY,CAAC;KACtF;EAEJ;;YAnC6B,MAAM;;AAdvB;IAAR,KAAK,EAAE;;kDAAa;AACZ;IAAR,KAAK,EAAE;;kDAAO;AACN;IAAR,KAAK,EAAE;8BAAY,UAAU;sDAAa;AAClC;IAAR,KAAK,EAAE;;oDAA4B;AAC3B;IAAR,KAAK,EAAE;;kDAAkC;AACjC;IAAR,KAAK,EAAE;;kDAAc;AACb;IAAR,KAAK,EAAE;;wDAA+B;AAC9B;IAAR,KAAK,EAAE;;qDAAiB;AACD;IAAvB,SAAS,CAAC,WAAW,CAAC;8BAAY,UAAU;sDAAC;AAVrC,mBAAmB;IAL/B,SAAS,CAAC;QACP,QAAQ,EAAE,aAAa;QACvB,kzBAA2C;;KAE9C,CAAC;qCAiB4B,MAAM;GAhBvB,mBAAmB,CAmD/B;;IChEY,gBAAgB,GAA7B,MAAa,gBAAgB;EAAI;AAApB,gBAAgB;IAL5B,QAAQ,CAAC;QACR,OAAO,EAAE,CAAC,YAAY,CAAC;QACvB,YAAY,EAAE,CAAC,mBAAmB,CAAC;QACnC,OAAO,EAAE,CAAC,mBAAmB,CAAC;KAC/B,CAAC;GACW,gBAAgB,CAAI;;ACTjC;;;;ACAA;;;;;;"}