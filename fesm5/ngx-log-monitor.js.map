{"version":3,"file":"ngx-log-monitor.js","sources":["ng://ngx-log-monitor/lib/helpers/log-message.helper.ts","ng://ngx-log-monitor/lib/log-monitor.component.ts","ng://ngx-log-monitor/lib/log-monitor.module.ts","ng://ngx-log-monitor/index.ts","ng://ngx-log-monitor/ngx-log-monitor.ts"],"sourcesContent":["import {LogMessage} from '../models/log-message.model';\n\nexport const normalizeLogMessage = (msg: LogMessage): LogMessage => ({\n  ...msg,\n  type: (msg.type ? msg.type : 'LOG'),\n  timestamp: (msg.timestamp ? msg.timestamp : new Date().toLocaleString() )\n});\n","import {\n    AfterViewInit,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ElementRef,\n    Input, NgZone,\n    OnChanges,\n    OnDestroy,\n    OnInit,\n    SimpleChanges,\n    ViewChild\n} from '@angular/core';\nimport { LogMessage } from './models/log-message.model';\nimport { normalizeLogMessage } from './helpers/log-message.helper';\nimport { Observable, Subscription } from 'rxjs';\nimport { delay } from 'rxjs/operators';\n\n@Component({\n    selector: 'log-monitor',\n    templateUrl: './log-monitor.component.html',\n    styleUrls: ['./log-monitor.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class LogMonitorComponent implements OnInit, OnDestroy, OnChanges, AfterViewInit {\n\n    @Input() delay = 500;\n    @Input() title;\n    @Input() logStream: Observable<LogMessage>;\n    @Input() history: LogMessage[] = [];\n    @Input() theme: 'dark' | 'light' = 'dark';\n    @Input() icons = true;\n    @Input() customClass = 'log-container';\n    @Input() animated = true;\n    @ViewChild('container') container: ElementRef;\n\n    _history: LogMessage[] = [];\n\n    private _subr: Subscription;\n\n    constructor(private zone: NgZone, private cd: ChangeDetectorRef) { }\n\n    ngOnInit() {\n        if (this.logStream) {\n            this._subr = this.logStream\n                .pipe(delay(this.delay))\n                .subscribe(a => {\n                    this._history = [...this._history, normalizeLogMessage(a)];\n                    this.cd.detectChanges();\n                    this.zone.run(() => {\n                        setTimeout(() => this.scrollToBottom());\n                    });\n                });\n        }\n    }\n\n    ngOnDestroy() {\n        if (this._subr) {\n            this._subr.unsubscribe();\n        }\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        if (changes['history']) {\n            this._history = changes['history'].currentValue.map(normalizeLogMessage);\n        }\n    }\n\n    ngAfterViewInit() {\n        this.scrollToBottom();\n    }\n\n    private scrollToBottom() {\n        this.container.nativeElement.scrollTop = this.container.nativeElement.scrollHeight;\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { LogMonitorComponent } from './log-monitor.component';\nimport {CommonModule} from '@angular/common';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [LogMonitorComponent],\n  exports: [LogMonitorComponent]\n})\nexport class LogMonitorModule { }\n","/*\n * Public API Surface of ngx-log-monitor\n */\n\nexport * from './lib/log-monitor.component';\nexport * from './lib/log-monitor.module';\nexport * from './lib/models/log-message.model';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}